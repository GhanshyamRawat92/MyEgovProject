swagger: '2.0'
info:
  version: 2.0.0
  title: eGov Property Tax Information System.
  description: >
    APIs for Property Tax module. This modules handles assessment of new
    properties, changes to existing properties (Detail Updates, division of
    property, etc.), 
    search of required properties and property tax calculation, demand generation, notices
    to enable ULBs to cmpletely manage the proeprties within their jurisdiction.
  contact:
    name: Ghanshyam Rawat
    email: ghanshyam.rawat@egovernments.org
schemes:
  - https
basePath: /properties/v2
x-common-path: >-
  https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml
paths:
  /_search:
    post:
      summary: Get the list of properties defined in the system.
      description: |
        Get the properties list based on the input parameters.
      parameters:
        - $ref: >-
            https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/requestInfo
        - $ref: >-
            https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/parameters/tenantId
        - $ref: '#/parameters/pageSize'
        - $ref: '#/parameters/pageNumber'
        - $ref: '#/parameters/sortProperty'
        - name: active
          in: query
          description: >-
            True will be set in cases where only active properties are needed
            and False will be set when inactive properties are needed and no
            value will be set when all properties are needed.
          required: false
          type: boolean
          format: varchar
          allowEmptyValue: true
        - name: propertyId
          in: query
          description: Primary key of Property object.
          required: false
          type: string
          format: varchar
        - name: upicNumber
          in: query
          required: false
          description: The unique reference number for a property.
          type: string
          minLength: 4
          maxLength: 128
          exclusiveMinimum: true
          exclusiveMaximum: false
        - name: oldUpicNo
          in: query
          required: false
          description: The unique old upic no for a Property.
          type: string
          minLength: 4
          maxLength: 128
          exclusiveMinimum: true
          exclusiveMaximum: false
        - name: oldestUpicNo
          in: query
          required: false
          description: The unique old upic no for a Property.
          type: string
          minLength: 4
          maxLength: 128
          exclusiveMinimum: true
          exclusiveMaximum: false
        - name: mobileNumber
          in: query
          required: false
          description: The mobile number of a Property owner.
          type: string
          pattern: '[0-9]'
          maxLength: 10
          exclusiveMaximum: true
        - name: aadhaarNumber
          in: query
          required: false
          description: The Aadhaar number of a Property owner.
          type: string
          pattern: '[0-9]'
          maxLength: 12
          exclusiveMaximum: true
        - name: houseNoBldgApt
          in: query
          required: false
          description: The house no for a building/land of a property.
          type: string
          minLength: 0
          maxLength: 32
          exclusiveMinimum: true
          exclusiveMaximum: false
        - name: revenueZone
          in: query
          description: Revenue Zone boundary where the property is located.
          required: false
          type: integer
          format: int64
        - name: revenueWard
          in: query
          description: Revenue Ward boundary where the property is located.
          required: false
          type: integer
          format: int64
        - name: locality
          in: query
          description: Locality boundary where the property is located.
          required: false
          type: integer
          format: int64
        - name: ownerName
          in: query
          required: false
          description: The name of a Property owner.
          type: string
          minLength: 4
          maxLength: 100
          exclusiveMinimum: true
          exclusiveMaximum: false
        - name: demandFrom
          in: query
          description: >-
            Property tax from amount. Properties can be searched between the tax
            amounts. This is the from amount.
          required: false
          type: number
          format: double
        - name: demandTo
          in: query
          description: >-
            Property tax to amount. Properties can be searched between the tax
            amounts. This is the to amount.
          required: false
          type: number
          format: double
        - name: applicationNo
          in: query
          required: false
          description: The application no for a property.
          type: string
          minLength: 1
          maxLength: 64
          exclusiveMinimum: true
          exclusiveMaximum: false
        - name: usageType
          in: query
          required: false
          description: Usage under the property details.
          type: string
          minLength: 1
          maxLength: 64
        - name: adminBoundary
          in: query
          required: false
          description: Admin boundary where the property is located.
          type: integer
          format: int64
      responses:
        '200':
          description: Successful response
          schema:
            $ref: '#/definitions/PropertyResponse'
        '400':
          description: Invalid input.
          schema:
            $ref: >-
              https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes
      tags:
        - Property
  /_create:
    post:
      summary: Create new properties.
      description: API to create new properties.
      parameters:
        - name: property
          in: body
          description: Details for the new property + RequestInfo meta data.
          required: true
          schema:
            $ref: '#/definitions/PropertyRequest'
      responses:
        '201':
          description: Property(s) created sucessfully
          schema:
            $ref: '#/definitions/PropertyResponse'
        '400':
          description: Property(s) creation failed
          schema:
            $ref: >-
              https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes
      tags:
        - Property
  /_update:
    post:
      summary: Update existing properties.
      description: Updates a given `Property` with newer details.
      parameters:
        - name: property
          in: body
          description: Request header for the property Request.
          required: true
          schema:
            $ref: '#/definitions/PropertyRequest'
      tags:
        - Property
      responses:
        '200':
          description: Update Property(s) successful
          schema:
            $ref: '#/definitions/PropertyResponse'
        '400':
          description: Update Property(s) failed
          schema:
            $ref: >-
              https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ErrorRes
definitions:
  PropertyInfo:
    type: object
    properties:
      id:
        type: string
        description: Unique Identifier of the Property(UUID).
      tenantId:
        type: string
        description: tenant id of the Property
        maxLength: 256
        minLength: 2
      acknowldgementNumber:
        type: string
        description: >-
          Acknowldgement number given to citizen on submitting the application
          for creation or modification of the property.
        maxLength: 64
        minLength: 1
      assessmentNumber:
        type: string
        description: >-
          UPIC (Unique Property Identification Number) of the Property. This is a
          unique in system. This is mandatory but always be generated on the
          final approval.
        maxLength: 256
        minLength: 6
      oldAssessmentNumber:
        type: string
        description: >-
          Old upic no of the Property. ULBs have the existing property in their
          system/manual records with their identification number, they want to
          continue the old reference number in this case the same identification
          number will be captured here.
        maxLength: 128
        minLength: 2
      assessmentDate:
            type: string
            format: date
            description: >-
              There will be work flow to create a new property in a system. The
              assessment date is the final approval and UPIC no generation date.
      status:
        type: string
        description: status of the Property
        maxLength: 64
        minLength: 2
        enum:
          - ACTIVE
          - INACTIVE
      propertyType:
        type: string
        description: >-
          Type of a property like Private, Vacant Land, State Government,
          Central Government etc.
        maxLength: 64
        minLength: 1
      owners:
        description: 'Property owners, these will be citizen users in system.'
        type: array
        items:
          $ref: '#/definitions/OwnerInfo'
  Property:
    allOf:
      - $ref: '#/definitions/PropertyInfo'
      - type: object
        description: A Object holds the basic data for a property
        properties:
          creationReason:
            type: string
            description: >-
              New property comes into system either property is newly
              constructed or existing property got sub divided. Here the reason
              for creation will be captured.
            maxLength: 256
            minLength: 1
            enum:
              - NEWPROPERTY
              - SUBDIVISION
          address:
            $ref: >-
              https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-1-0.yml#/definitions/Address
          propertyDetail:
            $ref: '#/definitions/PropertyDetail'
          
          occupancyDate:
            type: integer
            format: int64
            description: >-
              Property is constructed but the tax will be applicable only from
              the occupation date (time in epoch). System capture that date
              here.
          gisRefNo:
            type: string
            description: >-
              Property tax system will be integrated with GIS system. Here we
              capture the GIS ref. no.
            maxLength: 32
            minLength: 4
          boundary:
            $ref: '#/definitions/PropertyLocation'
          active:
            type: boolean
            description: >-
              True if the property is active and False if the property is
              inactive.
            default: true
          channel:
            type: string
            description: >-
              Property can be created from different channels Eg. System
              (properties created by ULB officials), CFC Counter (From citizen
              faciliation counters) etc. Here we are defining some known
              channels, there can be more client to client.
            maxLength: 64
            minLength: 4
            enum:
              - SYSTEM
              - CFC_COUNTER
              - CITIZEN
              - DATA_ENTRY
              - MIGRATION
          auditDetails:
            $ref: >-
              https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails
        required:
          - address
          - boundary
          - propertyDetail
          - occupancyDate
          - channel
  OwnerInfo:
    allOf:
      - $ref: >-
          https://raw.githubusercontent.com/egovernments/egov-services/master/docs/egov-user/contracts/v1-0-0.yml#/definitions/User
      - type: object
        properties:
          isPrimaryOwner:
            type: boolean
            description: The owner is primary or not
          isCurrentOwner:
            type: boolean
            description: The owner is current owner or not
          ownerShipPercentage:
            type: number
            format: double
            description: Ownership percentage.
          ownerType:
            type: string
            description: 'Type of owner, based on this option rebate will be calculated.'
            maxLength: 32
            minLength: 4
  PropertyRequest:
    description: >-
      Contract class to receive request. Array of Property items  are used in
      case of create . Where as single Property item is used for update
    properties:
      requestInfo:
        $ref: >-
          https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/RequestInfo
      properties:
        description: Used for search result and create only
        type: array
        minimum: 1
        maximum: 100
        items:
          $ref: '#/definitions/Property'
  PropertyResponse:
    description: >-
      Contract class to send response. Array of Property items  are used in case
      of search results or response for create. Where as single Property item is
      used for update
    properties:
      responseInfo:
        $ref: >-
          https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/ResponseInfo
      properties:
        description: Used for search result and create only
        type: array
        items:
          $ref: '#/definitions/Property'
  PropertyDetail:
    type: object
    properties:
      id:
        type: integer
        format: int64
        description: Unique Identifier of the PropertyDetail
      bpaNo:
        type: string
        description: Buidling plan approval no for the Property
        maxLength: 16
        minLength: 1
      subUsage:
        type: string
        description: sub usage of the Unit
        maxLength: 128
        minLength: 1
      bpaDate:
        type: string
        format: date
        description: Buidling plan approval date for the Property
      source:
        type: string
        description: >-
          Source of a assessment data. The properties will be created in a
          system based on the data avaialble in their manual records or during
          field survey. There can be more from client to client.
        maxLength: 64
        minLength: 1
        enum:
          - MUNICIPAL_RECORDS
          - FIELD_SURVEY
      regdDocNo:
        type: string
        description: Property registered no from Registration Department.
        maxLength: 64
        minLength: 1
      regdDocDate:
        type: string
        format: date
        description: roperty registered date from Registration Department.
      reason:
        type: string
        description: reason of the PropertyDetail
        maxLength: 64
        minLength: 1
      isVerified:
        type: boolean
        description: >-
          When 'source' of property is FIELD_SURVEY then property should be
          verified by higher officials or during a work flow also property to be
          verified in some cases. This field to capture the verification status.
      verificationDate:
        type: string
        format: date
        description: verification date of the Property
      isExempted:
        type: boolean
        description: >-
          Property can be exempted from tax for different reasons, this field
          captures the exempted status
        default: false
      exemptionReason:
        type: string
        description: exemption reason for the property
        maxLength: 32
        minLength: 1
      usage:
        type: string
        description: usage of the property
        maxLength: 64
        minLength: 1
      department:
        type: string
        description: >-
          department of the property which belongs to. This is applicable when
          property type is State Govternment or Central Government.
        maxLength: 64
        minLength: 1
      apartment:
        type: string
        description: apartment of the PropertyDetail
        maxLength: 64
        minLength: 1
      siteLength:
        type: number
        format: double
        description: length of the land
      siteBreadth:
        type: number
        format: double
        description: breadth of the land
      sitalArea:
        type: number
        format: double
        description: sital area of the land
      totalBuiltupArea:
        type: number
        format: double
        description: >-
          total builtup area of the property. If building has multiple floors,
          this is a sum of individual floor builtup area.
      undividedShare:
        type: number
        format: double
        description: undivided share of the flat. In case of apartment this is valid.
      noOfFloors:
        type: integer
        format: int64
        description: no of floors in the property
      isSuperStructure:
        type: boolean
        description: >-
          is property a super structure. If Land is ownned by one person and
          building constructed by one person then its called Super structure
        default: false
      landOwner:
        type: string
        description: Name of the land owner in case property is Super structure
        maxLength: 128
        minLength: 1
      floors:
        description: Floors
        type: array
        items:
          $ref: '#/definitions/Floor'
      documents:
        description: >-
          The documents attached during assessment, modification or any
          transaction happened on the property.
        type: array
        items:
          $ref: '#/definitions/Document'
      taxCalculations:
        type: string
        description: >-
          The json (array of
          'https://github.com/egovernments/egov-services/blob/master/docs/propertytax/contracts/pt-calculator/v1.0.0.yml#/definitions/TaxCalculation'
          )returned by tax calculator API
      factors:
        type: string
        description: 'The json (array of ''#/definitions/Factor'')'
      assessmentDates:
        description: >-
          when data entry happens for existing properties, all the assessemnt
          and reassessment dates will come here. This is list of AssessmentDate
          objects.
        type: array
        items:
          $ref: '#/definitions/AssessmentDate'
  PropertyLocation:
    type: object
    description: >-
      Boundary details for a property. 'revenueBoundary' is granular level
      Revenue heirarchy boundary, 'locationBoundary' is granular level Location
      heirarchy boundary, 'adminBoundary' is granular level Administration
      heirarchy boundary.
    properties:
      revenueBoundary:
        $ref: '#/definitions/Boundary'
      locationBoundary:
        $ref: '#/definitions/Boundary'
      adminBoundary:
        $ref: '#/definitions/Boundary'
      guidanceValueBoundary:
        type: string
        description: guidance value boundary id for tax calculation
      northBoundedBy:
        type: string
        description: property bounded by on north side
        maxLength: 256
        minLength: 1
      eastBoundedBy:
        type: string
        description: property bounded by on east side
        maxLength: 256
        minLength: 1
      westBoundedBy:
        type: string
        description: property bounded by on west side
        maxLength: 256
        minLength: 1
      southBoundedBy:
        type: string
        description: property bounded by on south side
        maxLength: 256
        minLength: 1
  VacantLandDetail:
    type: object
    properties:
      surveyNumber:
        type: string
        description: survey number of the Land
        maxLength: 64
        minLength: 4
      pattaNumber:
        type: string
        description: patta number of the Land
        maxLength: 64
        minLength: 4
      marketValue:
        type: number
        format: double
        description: market value of the Land
      capitalValue:
        type: number
        format: double
        description: capital value of the Land
      layoutApprovedAuth:
        type: string
        description: layout approved authority of the Land
        maxLength: 64
        minLength: 4
      layoutPermissionNo:
        type: string
        description: layout permission no by approved authority for the Land
        maxLength: 64
        minLength: 4
      layoutPermissionDate:
        type: string
        format: date
        description: layout permission date by approved authority for the Land
      resdPlotArea:
        type: number
        format: double
        description: resd plot area of the land
      nonResdPlotArea:
        type: number
        format: double
        description: non resd plot area of the land
  Floor:
    type: object
    description: >-
      The floor details. The Floor contains either Flats in case of apartment or
      Rooms in case of group or individual house.
    properties:
      floorNo:
        type: string
        description: floor no for the floor
        maxLength: 128
        minLength: 1
      floorSize:
        type: string
        description: floor no for the floor
        maxLength: 128
        minLength: 1
      units:
        description: Flat(s) or Room(s) information on a floor or in a Flat respectively.
        type: array
        items:
          $ref: '#/definitions/Unit'
    required:
      - floorNo
  Unit:
    type: object
    description: A logical group of rooms on a floor
    properties:
      unitNo:
        type: string
        description: >-
          unit no. Some ULBs captures the room wise details in case in the same
          floor different rooms are used for different purposes.
        maxLength: 128
        minLength: 1
      unitType:
        type: string
        description: type of the unit
        maxLength: 16
        minLength: 1
        enum:
          - FLAT
          - ROOM
      units:
        description: >-
          Flat(s) or Room(s) information. When unit is there inside a unit is a
          room.
        type: array
        items:
          $ref: '#/definitions/Unit'
      length:
        type: number
        format: double
        description: length of the Unit
      width:
        type: number
        format: double
        description: width of the Unit
      builtupArea:
        type: number
        format: double
        description: builtup area of the Unit
      assessableArea:
        type: number
        format: double
        description: >-
          assessable area for the Unit. Some ULBs have their own logic to
          consider builtup area for tax calculation.
      bpaBuiltupArea:
        type: number
        format: double
        description: builtup area given during the Building plan approval of the Floor
      carpetArea:
        type: number
        format: double
        description: carpet area given during the Building plan approval of the Floor
      exemptionArea:
        type: number
        format: double
        description: exemption area given during the Building plan approval of the Floor
      bpaNo:
        type: string
        description: Buidling plan approval no for the Floor
        maxLength: 16
        minLength: 1
      bpaDate:
        type: string
        format: date
        description: Buidling plan approval date for the Floor
      usage:
        type: string
        description: usage of the Unit
        maxLength: 128
        minLength: 1
      subUsage:
        type: string
        description: sub usage of the Unit
        maxLength: 128
        minLength: 1
      occupancyType:
        type: string
        description: occupancy of the Unit
        maxLength: 64
        minLength: 1
      occupierName:
        type: string
        description: Name of the occupier in a Unit
        maxLength: 4000
        minLength: 1
      firmName:
        type: string
        description: Name of the firm in a Unit
        maxLength: 128
        minLength: 1
      rentCollected:
        type: number
        format: double
        description: rent collected for the Unit it its given tenants are living.
      structure:
        type: string
        description: structure of the Unit
        maxLength: 64
        minLength: 1
      age:
        type: string
        description: age of the Unit
        maxLength: 64
        minLength: 1
      exemptionReason:
        type: string
        description: exemption reason for the Unit
        maxLength: 32
        minLength: 1
      isStructured:
        type: boolean
        description: >-
          is Unit is structured. Some building may not be in square or rectangle
          or in a proper shape to calculate a builtup area.
        default: true
      occupancyDate:
        type: string
        format: date
        description: occupancy date of the Unit
      constructionStartDate:
        type: string
        format: date
        description: construction Start date of the Unit
      constCompletionDate:
        type: string
        format: date
        description: construction completion date of the Unit
      manualArv:
        type: number
        format: double
        description: manual arv for the Unit
      rv:
        type: number
        format: double
        description: The system calculated rv for the Unit
      arv:
        type: number
        format: double
        description: The system calculated arv for the Unit
      electricMeterNo:
        type: string
        description: electricity meter no for the Unit
        maxLength: 64
        minLength: 1
      waterMeterNo:
        type: string
        description: water meter no for the Unit
        maxLength: 64
        minLength: 1
      landCost:
        type: number
        format: double
        description: Cost of the Land.
      buildingCost:
        type: number
        format: double
        description: Cost of the Land.
      isAuthorised:
        type: boolean
        description: >-
          this would indicate the Unit is an autorised or unauthorised
          construction, if true then penalty to be calculated depends on ULB
          requirements.
      auditDetails:
        $ref: >-
          https://raw.githubusercontent.com/egovernments/egov-services/master/docs/common/contracts/v1-0-0.yml#/definitions/AuditDetails
    required:
      - unitNo
      - builtupArea
      - usage
      - occupancyType
      - structure
      - occupancyDate
  Document:
    type: object
    description: >-
      This object holds list of documents attached during the transaciton for a
      property
    properties:
      id:
        type: integer
        format: int64
        description: unique id of the Document.
      documentType:
        type: string
        description: >-
          unique document type code, should be validated with document type
          master
      fileStore:
        type: string
        description: File store reference key.
  Boundary:
    type: object
    description: This object the boundary info
    properties:
      id:
        type: integer
        format: int64
        description: unique id of the Boundary.
      name:
        type: string
        description: Name of the boundary.
      code:
        type: string
        description: Code of the boundary.
  AssessmentDate:
    type: object
    description: This object the boundary info
    properties:
      name:
        type: string
        description: Name of the assessment date
        enum:
          - firstassessment
          - currentassessment
          - revisedassessment
          - lastassessment
      date:
        type: string
        format: date
        description: assessment date. date format is dd/MM/yyyy
  
parameters:
  pageSize:
    name: pageSize
    in: query
    description: Number of records returned.
    type: integer
    minimum: 0
    exclusiveMinimum: true
    maximum: 100
    exclusiveMaximum: false
    multipleOf: 10
    default: 20
  pageNumber:
    name: pageNumber
    in: query
    description: Page number
    type: integer
    default: 1
  sortProperty:
    name: sort
    in: query
    description: >-
      Property results will be sorted by upicno ascending by default if this
      parameter is not provided.
    type: array
    uniqueItems: true
    minItems: 1
    maxItems: 3
    collectionFormat: pipes
    items:
      type: string
      pattern: '[-+](upicno|doorNumber|ownerName)'
    default:
      - +upicno
tags:
  - name: Property
    description: APIs required for property.
  - name: Transfer
    description: APIs required for title transfer.
